<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="一枚小菜鸡~" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Syraer&#39;s Blog
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover2.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Syraer&#39;s Blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
        <img
          src="/images/ayer.svg"
          class="cover-logo"
          alt="Syraer&#39;s Blog"
        />
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-fabric"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/25/fabric/"
    >Hyperledger Fabric - 01 - 安装并测试网络</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/25/fabric/" class="article-date">
  <time datetime="2020-11-25T02:31:23.000Z" itemprop="datePublished">2020-11-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Blockchain/">Blockchain</a> / <a class="article-category-link" href="/categories/Blockchain/Hyperledger-Fabric/">Hyperledger Fabric</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Hyperledger-Fabric-搭建并测试"><a href="#Hyperledger-Fabric-搭建并测试" class="headerlink" title="Hyperledger Fabric 搭建并测试"></a>Hyperledger Fabric 搭建并测试</h1><h2 id="一、环境准备"><a href="#一、环境准备" class="headerlink" title="一、环境准备"></a>一、环境准备</h2><table>
<thead>
<tr>
<th>系统工具</th>
<th>版本</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>CentOS</td>
<td>7</td>
<td></td>
</tr>
<tr>
<td>Docker</td>
<td>18.09.4</td>
<td>参考：<a target="_blank" rel="noopener" href="https://zzugo.ayxyj.cn/2020/11/01/docker/">Centps7安装docker</a></td>
</tr>
<tr>
<td>Docker-compose</td>
<td>1.25.0</td>
<td>参考下方</td>
</tr>
<tr>
<td>GO</td>
<td>1.13.4</td>
<td>参考：<a target="_blank" rel="noopener" href="https://golang.org/dl/">CentOS7下载Go</a> 解压配置环境变量即可</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装docker-compose</span></span><br><span class="line"><span class="comment">#方式一：</span></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.25.0-rc1/docker-compose-`uname -s`-`uname -m` -o /usr/<span class="built_in">local</span>/bin/docker-compose </span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"><span class="comment">#方式二：</span></span><br><span class="line">pip install -U docker-compose==1.23.2</span><br></pre></td></tr></table></figure>

<h2 id="二、安装fabric2-x"><a href="#二、安装fabric2-x" class="headerlink" title="二、安装fabric2.x"></a>二、安装fabric2.x</h2><h3 id="首先，自行下载fabric源码git-clone，将下载的fabric包解压出来，进入到-HOME-fabric-scripts脚本目录进行安装"><a href="#首先，自行下载fabric源码git-clone，将下载的fabric包解压出来，进入到-HOME-fabric-scripts脚本目录进行安装" class="headerlink" title="首先，自行下载fabric源码git clone，将下载的fabric包解压出来，进入到${HOME}/fabric/scripts脚本目录进行安装"></a>首先，自行下载fabric源码<a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric.git">git clone</a>，将下载的fabric包解压出来，进入到<code>$&#123;HOME&#125;/fabric/scripts</code>脚本目录进行安装</h3><p>![1](./fabric/1 .png)</p>
<h3 id="下载过程比较漫长，因为采用的是docker镜像容器进行安装，需要下载所需要的镜像，我这里面拉取了所有的镜像，很多暂时不用（2-x不支持kafka-zookeeper）"><a href="#下载过程比较漫长，因为采用的是docker镜像容器进行安装，需要下载所需要的镜像，我这里面拉取了所有的镜像，很多暂时不用（2-x不支持kafka-zookeeper）" class="headerlink" title="下载过程比较漫长，因为采用的是docker镜像容器进行安装，需要下载所需要的镜像，我这里面拉取了所有的镜像，很多暂时不用（2.x不支持kafka,zookeeper）"></a>下载过程比较漫长，因为采用的是docker镜像容器进行安装，需要下载所需要的镜像，我这里面拉取了所有的镜像，很多暂时不用（2.x不支持kafka,zookeeper）</h3><ul>
<li>脚本执行结束后，可以看到相关镜像等其他信息，如果存在没有拉取完的镜像，就在执行一边。</li>
</ul>
<p><img src="/2020/11/25/fabric/2.png" alt="2"></p>
<ul>
<li>通过docker查看拉取的镜像信息<code>docker image ls -a</code></li>
</ul>
<p><img src="/2020/11/25/fabric/3.png" alt="3"></p>
<p>执行完如上图，另外在scripts目录下会多出来一个fabric-samples目录</p>
<h2 id="三、启动test-network测试网络"><a href="#三、启动test-network测试网络" class="headerlink" title="三、启动test-network测试网络"></a>三、启动test-network测试网络</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /fabric-samples/test-network</span><br><span class="line">network.sh up</span><br></pre></td></tr></table></figure>

<p>如下图，表示启动成功，已启动一个orderer节点和两个peer节点。</p>
<p><img src="/2020/11/25/fabric/4.png" alt="4"></p>
<p>可以查看本地启动的docker container 存在测试网络启动的oder和peer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a  <span class="comment">#查看启动的container</span></span><br><span class="line">docker container ls -a <span class="comment">#查看启动的container</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/25/fabric/5.png" alt="5"></p>
<h2 id="四、使用测试网络"><a href="#四、使用测试网络" class="headerlink" title="四、使用测试网络"></a>四、使用测试网络</h2><ul>
<li>创建channel，使用network.sh脚本创建来创建一个连接org1和org2组织并加入他们peer的通道，命令如下：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh createChannel</span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/25/fabric/6.png" alt="6"></p>
<p><img src="/2020/11/25/fabric/7.png" alt="7"></p>
<p>如上图，创建成功（默认通道名为mychannel）。</p>
<p>也可以带上channel标签，命令如下（-c channelName）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh createChannel -c channel1</span><br></pre></td></tr></table></figure>

<p>如果要在一个步骤中启动网络并创建频道，可以同时使用up和create channel模式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh up createChannel</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>在通道上启动链码。</li>
</ul>
<p>使用network.sh创建通道之后，可以使用以下命令在通道上启动链码（默认使用go语言）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh deployCC</span><br></pre></td></tr></table></figure>

<p>可以指定语言，加-l ，比如用java，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh deployCC -l java</span><br></pre></td></tr></table></figure>

<p>如图，启动成功：</p>
<p><img src="/2020/11/25/fabric/8.png" alt="8"></p>
<ul>
<li>与网络互动</li>
</ul>
<p>网络启动之后，可以使用peer cli客户端去操作网络，可以通过cli客户端去调用部署智能合约，更新通道，或者安装和部署新的智能合约。</p>
<p>首先确保<code>操作目录为test-network目录</code>。使用以下命令将二进制文件添加到cli路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PWD&#125;</span>/../bin:<span class="variable">$&#123;PWD&#125;</span>:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>

<p>还需要设置<code>FABRIC_CFG_PATH路径指向fabric-samples中的core.yaml文件，命令如下：</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> FABRIC_CFG_PATH=<span class="variable">$PWD</span>/../config/</span><br></pre></td></tr></table></figure>

<p>设置允许org1操作peer cli的环境变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Environment variables for Org1</span></span><br><span class="line"><span class="built_in">export</span> CORE_PEER_TLS_ENABLED=<span class="literal">true</span></span><br><span class="line"><span class="built_in">export</span> CORE_PEER_LOCALMSPID=<span class="string">&quot;Org1MSP&quot;</span></span><br><span class="line"><span class="built_in">export</span> CORE_PEER_TLS_ROOTCERT_FILE=<span class="variable">$&#123;PWD&#125;</span>/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt</span><br><span class="line"><span class="built_in">export</span> CORE_PEER_ADDRESS=localhost:7051</span><br><span class="line"><span class="built_in">export</span> CORE_PEER_MSPCONFIGPATH=<span class="variable">$&#123;PWD&#125;</span>/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp</span><br></pre></td></tr></table></figure>

<p>如上，<code>CORE_PEER_TLS_ROOTCERT_FILE和CORE_PEER_MSPCONFIGPATH环境变量指向organizations文件夹中的org1的加密文件。</code></p>
<p>使用以下命令获取汽车资产列表：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C mychannel -n fabcar -c <span class="string">&#x27;&#123;&quot;Args&quot;:[&quot;queryAllCars&quot;]&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="五、关闭网络"><a href="#五、关闭网络" class="headerlink" title="五、关闭网络"></a>五、关闭网络</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh down</span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/25/fabric/10.png" alt="10"></p>
<h3 id="启动过程详解"><a href="#启动过程详解" class="headerlink" title="启动过程详解"></a>启动过程详解</h3><ul>
<li><code>./network.sh</code>为两个peer节点和一个order节点创建了证书和密钥，默认情况下，脚本会利用在organizations/cryptogen文件夹下的加密工具。</li>
<li>脚本利用configtxgen工具创建了系统的创世块，它使用<code>configtx/configtx.yaml</code>文件来创建创世块，并存储在system-genesis-block文件夹中。</li>
<li>当上述两步完成之后，<code>./network.sh</code>会启动网络，脚本利用在docker文件夹下的<code>docker-compose-test-net.yaml</code>文件创建peer和orderer节点。</li>
<li>如果使用了<code>createChannel</code>子命令，脚本还会运行script文件夹下的<code>createChannel.sh</code>脚本来创建所需要的channel，脚本会用peer命令来创建channel，加入两个组织。</li>
<li>如果运行了deployCC命令，脚本会在所有peers上运行script下的<code>deployCC.sh</code>脚本来安装fabcar chaincode，在chaincode的定义被提交到channel之后，peer命令会调用init函数来初始化chaincode，并将所需的数据放入chaincode中。</li>
</ul>
<p>注：下图是fabric简化交易过程</p>
<p><img src="/2020/11/25/fabric/11.png" alt="11"></p>
<h2 id="六、标志并启动网络（ca为网络的标志）"><a href="#六、标志并启动网络（ca为网络的标志）" class="headerlink" title="六、标志并启动网络（ca为网络的标志）"></a>六、标志并启动网络（ca为网络的标志）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh up -ca</span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/25/fabric/Users/AYXYJ/Desktop/fabric/hyperledger%20fabric%20note/fabric/12.png" alt="标志并启动网络"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blockchain/" rel="tag">Blockchain</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hyperledger-Fabric/" rel="tag">Hyperledger Fabric</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-docker_的私有registry"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/23/docker_%E7%9A%84%E7%A7%81%E6%9C%89registry/"
    >Docker Registry - 搭建本地仓库并测试</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/23/docker_%E7%9A%84%E7%A7%81%E6%9C%89registry/" class="article-date">
  <time datetime="2020-11-23T06:24:15.000Z" itemprop="datePublished">2020-11-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a> / <a class="article-category-link" href="/categories/Docker/Registry/">Registry</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="搭建一个私有的docker-registry"><a href="#搭建一个私有的docker-registry" class="headerlink" title="搭建一个私有的docker registry"></a>搭建一个私有的docker registry</h1><p>找一台docker host，然后运行 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v /opt/registry:/var/lib/registry -p 5000:5000 --restart=always --name registry registry:2</span><br></pre></td></tr></table></figure>

<p>docker registry 绑定了到本地的80端口。 接下来我们配置DNS server，假如我们这台运行registry的机器地址是192.168.99.100,</p>
<p>然后我们找到上次配置gitlab ci的那个dns container</p>
<p>执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it dns-server &#x2F;bin&#x2F;sh</span><br></pre></td></tr></table></figure>

<p>添加一条新的记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F; # more &#x2F;etc&#x2F;dnsmasqhosts</span><br><span class="line">192.168.211.10 gitlab.example.com</span><br><span class="line">192.168.99.100 registry.example.com</span><br><span class="line">&#x2F; #</span><br></pre></td></tr></table></figure>

<p>然后重启container</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart dns-server</span><br></pre></td></tr></table></figure>

<p>最后我们去gitlab-ci服务器，ping一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@gitlab-ci ~]$ ping registry.example.com</span><br><span class="line">PING registry.example.com (192.168.99.100) 56(84) bytes of data.</span><br><span class="line">64 bytes from registry.example.com (192.168.99.100): icmp_seq&#x3D;1 ttl&#x3D;63 time&#x3D;0.395 ms</span><br><span class="line">64 bytes from registry.example.com (192.168.99.100): icmp_seq&#x3D;2 ttl&#x3D;63 time&#x3D;0.537 ms</span><br><span class="line">64 bytes from registry.example.com (192.168.99.100): icmp_seq&#x3D;3 ttl&#x3D;63 time&#x3D;0.683 ms</span><br><span class="line">^C</span><br><span class="line">--- registry.example.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2003ms</span><br><span class="line">rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 0.395&#x2F;0.538&#x2F;0.683&#x2F;0.119 ms</span><br><span class="line">[vagrant@gitlab-ci ~]$</span><br></pre></td></tr></table></figure>

<p>成功。</p>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>在gitlab-ci服务器上，编辑</p>
<p>创建一个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br></pre></td></tr></table></figure>

<p>然后写入内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@gitlab-ci ~]$ sudo more &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br><span class="line">&#123; &quot;insecure-registries&quot;:[&quot;registry.example.com:5000&quot;] &#125;</span><br><span class="line">[vagrant@gitlab-ci ~]$</span><br></pre></td></tr></table></figure>

<p>从docker hub拉取一个busybox，然后打一个tag</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull busybox</span><br><span class="line">docker tag busybox registry.example.com:5000&#x2F;busybox</span><br></pre></td></tr></table></figure>

<p>然后push到我们的私有registry里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@gitlab-ci ~]$ docker push registry.example.com:5000&#x2F;busybox</span><br><span class="line">The push refers to repository [registry.example.com:5000&#x2F;busybox]</span><br><span class="line">c5183829c43c: Pushed</span><br><span class="line">latest: digest: sha256:c7b0a24019b0e6eda714ec0fa137ad42bc44a754d9cea17d14fba3a80ccc1ee4 size: 527</span><br><span class="line">[vagrant@gitlab-ci ~]$</span><br></pre></td></tr></table></figure>

<p>成功。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Registry/" rel="tag">Registry</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-docker-portainer"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/22/docker-portainer/"
    >Docker Portainer - 安装并远程连接docker-WebUI</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/22/docker-portainer/" class="article-date">
  <time datetime="2020-11-22T02:31:23.000Z" itemprop="datePublished">2020-11-22</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a> / <a class="article-category-link" href="/categories/Docker/Portainer/">Portainer</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Centos7远程访问系统中的docker-WebUI工具Portainer"><a href="#Centos7远程访问系统中的docker-WebUI工具Portainer" class="headerlink" title="Centos7远程访问系统中的docker-WebUI工具Portainer"></a>Centos7远程访问系统中的docker-WebUI工具Portainer</h2><p>首先获取portainer image </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/portainer</span><br></pre></td></tr></table></figure>

<p>新建一个卷（portainer_data）来存Portainer数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 9000:9000 -p 8000:8000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer </span><br><span class="line"></span><br><span class="line"><span class="comment">#第二种本地存储</span></span><br><span class="line">docker run -d --restart=always -p 9000:9000 -v /root/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock --name dev-portainer portainer/portainer</span><br></pre></td></tr></table></figure>

<p>修改将要被远程连接的客户机的docker.service 文件开通docker的远程管理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375</span><br></pre></td></tr></table></figure>

<p>重启客户机docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload </span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>关闭客户机防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">查看防火墙状态： systemctl status firewalld.service  <span class="comment">#绿的running表示防火墙开启</span></span><br><span class="line"></span><br><span class="line">执行关闭命令： systemctl stop firewalld.service</span><br><span class="line"></span><br><span class="line">再次执行查看防火墙命令：systemctl status firewalld.service</span><br><span class="line"></span><br><span class="line">执行开机禁用防火墙自启命令  ： systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure>

<p>查看端口信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ss -ntpl</span><br><span class="line"><span class="comment">#存在2375即可访问</span></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Portainer/" rel="tag">Portainer</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-solidity-02"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/18/solidity-02/"
    >Solidity - 02 - 基本语法</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/18/solidity-02/" class="article-date">
  <time datetime="2020-11-18T04:36:42.000Z" itemprop="datePublished">2020-11-18</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Blockchain/">Blockchain</a> / <a class="article-category-link" href="/categories/Blockchain/Solidity/">Solidity</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="元素的可见性"><a href="#元素的可见性" class="headerlink" title="元素的可见性"></a>元素的可见性</h1><p>private 修饰的函数为私有的，只有合约内部可以调用</p>
<p>Public修饰的函数为共有的，合约内外都可以调用</p>
<p>public/private 可以修饰状态变量</p>
<p>状态变量默认是私有的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    <span class="comment">//状态变量</span></span><br><span class="line">    <span class="comment">//类型不匹配时需要显示转换类型</span></span><br><span class="line">    <span class="comment">//返回值需要使用returns描述</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//public/private 可以修饰状态变量</span></span><br><span class="line">    <span class="comment">//状态变量默认是私有的</span></span><br><span class="line">    uint256 public ui256 = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    int8 private i10 = -<span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//private 修饰的函数为私有的，只有合约内部可以调用</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) <span class="title">private</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ui256 + uint256(i10);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isEqueal</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">bool</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ui256 == uint256(i10);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Public修饰的函数为共有的，合约内外都可以调用</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Add</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="View，Constant，Pure介绍"><a href="#View，Constant，Pure介绍" class="headerlink" title="View，Constant，Pure介绍"></a>View，Constant，Pure介绍</h1><p> ==//在constant/view 修饰函数的函数中，如果去修改了状态变量，编译器不会报错，但是赋值不会成功(坑！！！！）==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    <span class="comment">//状态变量</span></span><br><span class="line">    <span class="comment">//类型不匹配时需要显示转换类型</span></span><br><span class="line">    <span class="comment">//返回值需要使用returns描述</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//public/private 可以修饰状态变量</span></span><br><span class="line">    <span class="comment">//状态变量默认是私有的</span></span><br><span class="line">    uint256 public ui = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">    int8 private i10 = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. 如果函数中没有用到状态变量：（既没有读也没有写），就修饰为pure</span></span><br><span class="line">    <span class="comment">// 2. 如果读了，但是没写，修饰为view、constant</span></span><br><span class="line">    <span class="comment">// 3. 如果写了，那么不修饰即可</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">constant</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ui + uint256(i10);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">pure</span> <span class="title">returns</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setValue</span>(<span class="params">uint256 num</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        ui = num;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//在constant/view 修饰函数的函数中，如果去修改了状态变量，编译器不会报错，但是赋值不会成功(坑！！！！）</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setValue1</span>(<span class="params">uint256 num</span>) <span class="title">public</span> <span class="title">constant</span> </span>&#123;</span><br><span class="line">        ui = num;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isEqueal</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">bool</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ui == uint256(i10);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="payable关键字"><a href="#payable关键字" class="headerlink" title="payable关键字"></a>payable关键字</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">string</span> public str ;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//修饰为payable的函数才可以接收转账</span></span><br><span class="line">    <span class="comment">//不指定payable无法接收</span></span><br><span class="line">    function test1(<span class="keyword">string</span> src) public payable &#123;</span><br><span class="line">        str = src;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function test2(<span class="keyword">string</span> src) public &#123;</span><br><span class="line">        str = src;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function getbalance() public view returns(uint256) &#123;</span><br><span class="line">        <span class="comment">//this代表当前合约本身</span></span><br><span class="line">        <span class="comment">//balance方法，获取当前合约的余额</span></span><br><span class="line">        <span class="keyword">return</span> this.balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="地址获取余额balance"><a href="#地址获取余额balance" class="headerlink" title="地址获取余额balance"></a>地址获取余额balance</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    address public addr1 = <span class="number">0x0014723a09acff6d2a60dcdf7aa4aff308fddc160c</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//地址address类型本质上是一个160位的数字</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//可以进行加减，需要强制转换</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint160</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uint160(addr1) + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//1. 匿名函数：没有函数名，没有参数，没有返回值的函数，就是匿名函数</span></span><br><span class="line">    <span class="comment">//2. 当调用一个不存在的方法时，合约会默认的去调用匿名函数</span></span><br><span class="line">    <span class="comment">//3. 匿名函数一般用来给合约转账，因为费用低</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) <span class="title">public</span>  <span class="title">payable</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBalance</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> addr1.balance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getContractBalance</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//this代表当前合约本身</span></span><br><span class="line">        <span class="comment">//balance方法，获取当前合约的余额</span></span><br><span class="line">        <span class="keyword">return</span> address(<span class="built_in">this</span>).balance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="地址转账"><a href="#地址转账" class="headerlink" title="地址转账"></a>地址转账</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    address public addr0 = <span class="number">0x00ca35b7d915458ef540ade6068dfe2f44e8fa733c</span>;</span><br><span class="line">    address public addr1 = <span class="number">0x0014723a09acff6d2a60dcdf7aa4aff308fddc160c</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//1. 匿名函数：没有函数名，没有参数，没有返回值的函数，就是匿名函数</span></span><br><span class="line">    <span class="comment">//2. 当调用一个不存在的方法时，合约会默认的去调用匿名函数</span></span><br><span class="line">    <span class="comment">//3. 匿名函数一般用来给合约转账，因为费用低</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) <span class="title">public</span>  <span class="title">payable</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBalance</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> addr1.balance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getContractBalance</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address(<span class="built_in">this</span>).balance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//由合约向addr1 转账10以太币</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">transfer</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 转账的时候单位是wei</span></span><br><span class="line">        <span class="comment">//2. 1 ether = 10 ^18 wei （10的18次方）</span></span><br><span class="line">        <span class="comment">//3. 向谁转钱，就用谁调用tranfer函数</span></span><br><span class="line">        <span class="comment">//4. 花费的是合约的钱</span></span><br><span class="line">        <span class="comment">//5. 如果金额不足，transfer函数会抛出异常</span></span><br><span class="line">        addr1.transfer(<span class="number">10</span> * <span class="number">10</span> **<span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//send转账与tranfer使用方式一致，但是如果转账金额不足，不会抛出异常，而是会返回false</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sendTest</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        addr1.send(<span class="number">10</span> * <span class="number">10</span> **<span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="bytes1：内置的固定长度的字节数组"><a href="#bytes1：内置的固定长度的字节数组" class="headerlink" title="bytes1：内置的固定长度的字节数组"></a>bytes1：内置的固定长度的字节数组</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line"></span><br><span class="line">    bytes1 b1 =<span class="string">&quot;h&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    bytes20 b10 = <span class="string">&quot;helloworld&quot;</span>;</span><br><span class="line"></span><br><span class="line">    function getLen() public view returns(uint256) &#123;</span><br><span class="line">        <span class="keyword">return</span> b10.length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function setValue() private pure &#123;</span><br><span class="line">        <span class="comment">//1. 固定长度数组可以通过下标访问</span></span><br><span class="line">        <span class="comment">//2. 只能读取，不能写</span></span><br><span class="line">        <span class="comment">//b10[0] = v;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3. 存储的时候是ascii值存储</span></span><br><span class="line">    function getValue(uint256 i) public view returns(<span class="keyword">byte</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> b10[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="bytes动态字节数组"><a href="#bytes动态字节数组" class="headerlink" title="bytes动态字节数组"></a>bytes动态字节数组</h1><ol>
<li><p>可以不分空间，直接进行字符串赋值，会自动分配空间</p>
</li>
<li><p>如果未分配过空间，使用下标访问会访问越界报错</p>
</li>
<li><p>可以设置长度，自动分配对应空间，并且初始化为0</p>
</li>
<li><p>可以通过下标进行数据修改</p>
</li>
<li><p>支持push操作，在bytes最后面追加元素</p>
</li>
</ol>
<p>注意的坑：</p>
<p><strong>旧版本的remix可以直接在remix中使用”helloworld”形式给bytes赋值，新版本不允许，必须使用0x格式</strong></p>
<p>例如，如果函数类型为：byte b1, 那么赋值时需要输入的格式为：  “h”（旧版本）, 0x68(新版本)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line"></span><br><span class="line">    bytes public name;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getLen</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 可以不分空间，直接进行字符串赋值，会自动分配空间</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setValue</span>(<span class="params">bytes input</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        name = input;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2. 如果未分配过空间，使用下标访问会访问越界报错</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getByIndex</span>(<span class="params">uint256 i</span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">byte</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3. 可以设置长度，自动分配对应空间，并且初始化为0</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setLen</span>(<span class="params">uint256 len</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        name.length = len;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4.可以通过下标进行数据修改</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setValue2</span>(<span class="params">uint256 i</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        name[i] = <span class="string">&#x27;h&#x27;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//5. 支持push操作，在bytes最后面追加元素</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">pushData</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        name.push(<span class="string">&#x27;h&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="string"><a href="#string" class="headerlink" title="string"></a>string</h1><ul>
<li>动态尺寸的UTF-8编码字符串，是特殊的可变字节数组</li>
<li>引用类型</li>
<li><strong>不支持下标索引</strong></li>
<li><strong>不支持length、push方法</strong></li>
<li><strong>可以修改(需通过bytes转换)</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line"></span><br><span class="line">    string public name = <span class="string">&quot;lily&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        bytes(name)[<span class="number">0</span>] = <span class="string">&quot;L&quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getLength</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bytes(name).length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setLength</span>(<span class="params">uint256 i</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        bytes(name).length = i;</span><br><span class="line">        </span><br><span class="line">        bytes(name)[i - <span class="number">1</span>] = <span class="string">&#x27;H&#x27;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="storageVsMemory关键字"><a href="#storageVsMemory关键字" class="headerlink" title="storageVsMemory关键字"></a>storageVsMemory关键字</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    string public name = <span class="string">&quot;lily&quot;</span>;</span><br><span class="line">    uint256 public num = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">call1</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        setName(name);    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//对于引用类型数据，作为函数参数时，默认是memory类型（值传递）</span></span><br><span class="line">    <span class="comment">//function setName(string input) private &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">string memory input</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        num = <span class="number">20</span>;</span><br><span class="line">        bytes(input)[<span class="number">0</span>] = <span class="string">&quot;L&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">call2</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        setName2(name);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2. 如果想引用传递，那么需要明确指定为stroage类型</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setName2</span>(<span class="params">string storage input</span>) <span class="title">private</span> </span>&#123;</span><br><span class="line">        num = <span class="number">30</span>;</span><br><span class="line">        bytes(input)[<span class="number">0</span>] = <span class="string">&quot;L&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//如果局部变量是string，数组，结构体类型数据，默认情况下是storage类型</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">localTest</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">//string tmp = name;</span></span><br><span class="line">        string storage tmp = name;</span><br><span class="line">        num = <span class="number">40</span>;</span><br><span class="line">        bytes(tmp)[<span class="number">0</span>] = <span class="string">&quot;L&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">localTest1</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//也可以明确设置为memory类型</span></span><br><span class="line">        string memory tmp = name;</span><br><span class="line">        num = <span class="number">50</span>;</span><br><span class="line">        bytes(tmp)[<span class="number">0</span>] = <span class="string">&quot;L&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="byte1BytesString相互转换"><a href="#byte1BytesString相互转换" class="headerlink" title="byte1BytesString相互转换"></a>byte1BytesString相互转换</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    </span><br><span class="line">    bytes10 public b10 = <span class="number">0x68656c6c6f776f726c64</span>; <span class="comment">//helloworld</span></span><br><span class="line">    </span><br><span class="line">    bytes public bs10 = <span class="keyword">new</span> bytes(b10.length);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将固定长度数组的值赋值给不定长度数组</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fixedByteToBytes</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">//bs10 = b10;</span></span><br><span class="line">        <span class="keyword">for</span> (uint256 i = <span class="number">0</span>; i &lt; b10.length; i++) &#123;</span><br><span class="line">            bs10[i] = b10[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将bytes转成string</span></span><br><span class="line">    string public str1;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bytesToString</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        fixedByteToBytes();</span><br><span class="line">        str1 = string(bs10);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将string转成bytes</span></span><br><span class="line">    bytes public bs20;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">stringToBytes</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        bytesToString();</span><br><span class="line">        bs20 = bytes(str1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="自定义定长数组"><a href="#自定义定长数组" class="headerlink" title="自定义定长数组"></a>自定义定长数组</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Type[Len] name</span></span><br><span class="line">    </span><br><span class="line">    uint256[<span class="number">10</span>] public numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    uint256 public sum;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// - 类型T，长度K的数组定义为T[K]，例如：uint [5] numbers,  byte [10] names;</span></span><br><span class="line">    <span class="comment">// - 内容可变</span></span><br><span class="line">    <span class="comment">// - 长度不可变，不支持push</span></span><br><span class="line">    <span class="comment">// - 支持length方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">total</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">returns</span>(<span class="params">uint256</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (uint256 i = <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">            sum += numbers[i];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       <span class="keyword">return</span> sum; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setLen</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">//numbers.length = 10;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeValue</span>(<span class="params">uint256 i , uint256 value</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        numbers[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//++++++++++++++++++++++++++++++++++</span></span><br><span class="line">    </span><br><span class="line">    bytes10 public helloworldFixed = <span class="number">0x68656c6c6f776f726c64</span>;</span><br><span class="line">    </span><br><span class="line">    byte[<span class="number">10</span>] public helloworldDynamic = [byte(<span class="number">0x68</span>), <span class="number">0x65</span>, <span class="number">0x6c</span>, <span class="number">0x6c</span>, <span class="number">0x6f</span>, <span class="number">0x77</span>, <span class="number">0x6f</span>, <span class="number">0x72</span>, <span class="number">0x6c</span>, <span class="number">0x64</span>];</span><br><span class="line">    </span><br><span class="line">    bytes public b10;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setToBytes</span>(<span class="params"></span>) <span class="title">public</span>  <span class="title">returns</span> (<span class="params">string</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (uint256 i=<span class="number">0</span>; i&lt; helloworldDynamic.length; i++) &#123;</span><br><span class="line">            byte b1 = helloworldDynamic[i];</span><br><span class="line">            b10.push(b1);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> string(b10);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="自定义不定长数组"><a href="#自定义不定长数组" class="headerlink" title="自定义不定长数组"></a>自定义不定长数组</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract  Test &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第一种创建方式，直接赋值</span></span><br><span class="line">    uint8[] numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">pushData</span>(<span class="params">uint8 num</span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        numbers.push(num);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getNumbers</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint8[]</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> numbers;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用new关键字进行创建，赋值给storage变量数组</span></span><br><span class="line">    uint8[] numbers2;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setNumbers2</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        numbers2 = <span class="keyword">new</span> uint8[](<span class="number">7</span>);</span><br><span class="line">        numbers2.length = <span class="number">20</span>;</span><br><span class="line">        numbers2.push(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getNumbers2</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">uint8[]</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> numbers2;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setNumbers3</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用new创建的memory类型数组，无法改变长度</span></span><br><span class="line">        <span class="comment">//uint8[] memory numbers3 = new uint8[](7);</span></span><br><span class="line">        uint8[] memory numbers3;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//numbers3.push(10);     </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.24</span>;</span><br><span class="line"><span class="comment">//pragma experimental ABIEncoderV2;</span></span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">    <span class="comment">//定义结构之后无分号，与枚举一致</span></span><br><span class="line">    struct Student &#123;</span><br><span class="line">        string name;</span><br><span class="line">        uint age;</span><br><span class="line">        uint score;</span><br><span class="line">        string sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Student[] public Students;</span><br><span class="line">    </span><br><span class="line">        </span><br><span class="line">    <span class="comment">//两种赋值方式</span></span><br><span class="line">    Student public stu1 = Student(<span class="string">&quot;lily&quot;</span>, <span class="number">18</span>, <span class="number">90</span>, <span class="string">&quot;girl&quot;</span>);</span><br><span class="line">    Student public stu2 = Student(&#123;<span class="attr">name</span>:<span class="string">&quot;Jim&quot;</span>, <span class="attr">age</span>:<span class="number">20</span>, <span class="attr">score</span>:<span class="number">80</span>, <span class="attr">sex</span>:<span class="string">&quot;boy&quot;</span>&#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">assign</span>(<span class="params"></span>) <span class="title">public</span> </span>&#123;</span><br><span class="line">        Students.push(stu1);</span><br><span class="line">        Students.push(stu2);</span><br><span class="line">        </span><br><span class="line">        stu1.name = <span class="string">&quot;Lily&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// function returnStudent() public view returns(Student) &#123;</span></span><br><span class="line">    <span class="comment">//     return stu1;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用圆括号包裹起来的类型叫做元组“tuple”</span></span><br><span class="line">    <span class="comment">//特性：1.  不可修改，2.可以容纳不同类型的数据</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">returnStudent</span>(<span class="params"></span>) <span class="title">public</span> <span class="title">view</span> <span class="title">returns</span>(<span class="params">string, uint, uint, string</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (stu1.name, stu1.age, stu1.score, stu1.sex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="mapping"><a href="#mapping" class="headerlink" title="mapping"></a>mapping</h1><ol>
<li>相同的key对应的值会被覆盖</li>
<li>所有key都有值，不会抛异常，如果没有设置过某个key，会返回默认值<ol>
<li>bool ： false</li>
<li>int：0</li>
<li>string ： “”</li>
</ol>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="number">0.4</span><span class="number">.20</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">    <span class="comment">//id -&gt; name</span></span><br><span class="line">    mapping(<span class="function"><span class="params">uint</span> =&gt;</span> string) public id_names;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//构造函数：</span></span><br><span class="line">    <span class="comment">//1. 对象在创建的时候，自动执行的函数，完成对象的初始化工作</span></span><br><span class="line">    <span class="comment">//2. 构造函数仅执行一次</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// function Test() public &#123;</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="title">constructor</span>(<span class="params"></span>)  <span class="title">public</span>&#123;</span><br><span class="line">        id_names[<span class="number">1</span>] = <span class="string">&quot;lily&quot;</span>;</span><br><span class="line">        id_names[<span class="number">2</span>] = <span class="string">&quot;Jim&quot;</span>;</span><br><span class="line">        id_names[<span class="number">3</span>] = <span class="string">&quot;Lily&quot;</span>;</span><br><span class="line">        id_names[<span class="number">3</span>] = <span class="string">&quot;Tom&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getNameById</span>(<span class="params">uint id</span>)  <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//加上storage如何赋值？</span></span><br><span class="line">        string memory name = id_names[id];</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setNameById</span>(<span class="params">uint id</span>)  <span class="title">public</span> <span class="title">returns</span> (<span class="params">string</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// mapping(uint =&gt; string) memory id_name = id_names;</span></span><br><span class="line">        <span class="comment">// var ids = id_names;</span></span><br><span class="line">        id_names[id] = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// function getMapLength() public returns (uint)&#123;</span></span><br><span class="line">    <span class="comment">//     return id_names.length;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blockchain/" rel="tag">Blockchain</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Solidity/" rel="tag">Solidity</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-IPFS"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/15/IPFS/"
    >IPFS - 01 - 搭建</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/15/IPFS/" class="article-date">
  <time datetime="2020-11-15T01:56:11.000Z" itemprop="datePublished">2020-11-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/BlockChain/">BlockChain</a> / <a class="article-category-link" href="/categories/BlockChain/IPFS/">IPFS</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一、安装IPFS"><a href="#一、安装IPFS" class="headerlink" title="一、安装IPFS"></a>一、安装IPFS</h2><pre><code>&gt; * 1.下载Centos或WIndows的安装包 </code></pre>
<p><img src="/2020/11/15/IPFS/1604282306274.png" alt="1604282306274"></p>
<ul>
<li>2.上传并安装IPFS</li>
</ul>
<p><img src="/2020/11/15/IPFS/1604282593675.png" alt="1604282593675"></p>
<ul>
<li><p>3.解压并安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh install.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/15/IPFS/1604282679231.png" alt="1604282679231"></p>
</li>
</ul>
<h2 id="二、测试IPFS"><a href="#二、测试IPFS" class="headerlink" title="二、测试IPFS"></a>二、测试IPFS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ipfs  daemon   <span class="comment">#启动ipfs服务 加入IPFS网络</span></span><br><span class="line"></span><br><span class="line">ipfs </span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/15/IPFS/1604282697844.png" alt="1604282697844"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ipfs init </span><br><span class="line"></span><br><span class="line">ll -a ~/    //可以看到家目录下创建一个 .ipfs 文件夹</span><br><span class="line"></span><br><span class="line">ipfs cat /ipfs/QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc/readme  //可以看到IPFS几个模块</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/15/IPFS/1604282774407.png" alt="1604282774407"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipfs id </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/15/IPFS/1604282874036.png" alt="1604282874036"></p>
<p>可以通过快速开始学习IPFS的基本操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 .ipfs]<span class="comment"># ipfs cat /ipfs/QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc/quick-start</span></span><br><span class="line"><span class="comment"># 0.1 - Quick Start</span></span><br><span class="line"></span><br><span class="line">This is a <span class="built_in">set</span> of short examples with minimal explanation. It is meant as</span><br><span class="line">a <span class="string">&quot;quick start&quot;</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Add a file to ipfs:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> &gt;hello</span><br><span class="line">  ipfs add hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">View it:</span><br><span class="line"></span><br><span class="line">  ipfs cat &lt;the-hash-you-got-here&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Try a directory:</span><br><span class="line"></span><br><span class="line">  mkdir foo</span><br><span class="line">  mkdir foo/bar</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;baz&quot;</span> &gt; foo/baz</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;baz&quot;</span> &gt; foo/bar/baz</span><br><span class="line">  ipfs add -r foo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">View things:</span><br><span class="line"></span><br><span class="line">  ipfs ls &lt;the-hash-here&gt;</span><br><span class="line">  ipfs ls &lt;the-hash-here&gt;/bar</span><br><span class="line">  ipfs cat &lt;the-hash-here&gt;/baz</span><br><span class="line">  ipfs cat &lt;the-hash-here&gt;/bar/baz</span><br><span class="line">  ipfs cat &lt;the-hash-here&gt;/bar</span><br><span class="line">  ipfs ls &lt;the-hash-here&gt;/baz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">References:</span><br><span class="line"></span><br><span class="line">  ipfs refs &lt;the-hash-here&gt;</span><br><span class="line">  ipfs refs -r &lt;the-hash-here&gt;</span><br><span class="line">  ipfs refs --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Get:</span><br><span class="line"></span><br><span class="line">  ipfs get &lt;the-hash-here&gt; -o foo2</span><br><span class="line">  diff foo foo2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Objects:</span><br><span class="line"></span><br><span class="line">  ipfs object get &lt;the-hash-here&gt;</span><br><span class="line">  ipfs object get &lt;the-hash-here&gt;/foo2</span><br><span class="line">  ipfs object --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Pin + GC:</span><br><span class="line"></span><br><span class="line">  ipfs pin add &lt;the-hash-here&gt;</span><br><span class="line">  ipfs repo gc</span><br><span class="line">  ipfs ls &lt;the-hash-here&gt;</span><br><span class="line">  ipfs pin rm &lt;the-hash-here&gt;</span><br><span class="line">  ipfs repo gc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Daemon:</span><br><span class="line"></span><br><span class="line">  ipfs daemon  (<span class="keyword">in</span> another terminal)</span><br><span class="line">  ipfs id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Network:</span><br><span class="line"></span><br><span class="line">  (must be online)</span><br><span class="line">  ipfs swarm peers</span><br><span class="line">  ipfs id</span><br><span class="line">  ipfs cat &lt;hash-of-remote-object&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mount:</span><br><span class="line"></span><br><span class="line">  (warning: fuse is finicky!)</span><br><span class="line">  ipfs mount</span><br><span class="line">  <span class="built_in">cd</span> /ipfs/&lt;the-hash-here&gt;</span><br><span class="line">  ls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Tool:</span><br><span class="line"></span><br><span class="line">  ipfs version</span><br><span class="line">  ipfs update</span><br><span class="line">  ipfs commands</span><br><span class="line">  ipfs config --<span class="built_in">help</span></span><br><span class="line">  open http://localhost:5001/webui</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Browse:</span><br><span class="line"></span><br><span class="line">  WebUI:</span><br><span class="line"></span><br><span class="line">    http://localhost:5001/webui</span><br><span class="line"></span><br><span class="line">  video:</span><br><span class="line"></span><br><span class="line">    http://localhost:8080/ipfs/QmVc6zuAneKJzicnJpfrqCH9gSy6bz54JhcypfJYhGUFQu/play<span class="comment">#/ipfs/QmTKZgRNwDNZwHtJSjCp6r5FYefzpULfy37JvMt9DwvXse</span></span><br><span class="line"></span><br><span class="line">  images:</span><br><span class="line"></span><br><span class="line">    http://localhost:8080/ipfs/QmZpc3HvfjEXvLWGQPWbHk3AjD5j8NEN4gmFN8Jmrd5g83/cs</span><br><span class="line"></span><br><span class="line">  markdown renderer app:</span><br><span class="line"></span><br><span class="line">    http://localhost:8080/ipfs/QmX7M9CiYXjVeFnkfVGf3y5ixTZ2ACeSGyL1vBJY1HvQPp/mdown</span><br><span class="line"></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BlockChain/" rel="tag">BlockChain</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IPFS/" rel="tag">IPFS</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Geth_note"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/14/Geth_note/"
    >Geth_搭建私有链</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/14/Geth_note/" class="article-date">
  <time datetime="2020-11-14T03:32:14.000Z" itemprop="datePublished">2020-11-14</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/BlockChain/">BlockChain</a> / <a class="article-category-link" href="/categories/BlockChain/Geth/">Geth</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>MetaMask_pass:spot raccoon network sweet feel song knee put just uncover news audit</p>
<p>Geth客户端：<a target="_blank" rel="noopener" href="https://geth.ethereum.org/downloads/">Geth_download</a></p>
<h3 id="初始化创世快"><a href="#初始化创世快" class="headerlink" title="初始化创世快"></a>初始化创世快</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\gethData&gt;geth --datadir . init genesis.json</span><br><span class="line">此时在testGeth目录下会生成data目录，data目录又包含geth和keystore目录，geth目录存储区块数据，keystore目录则保存账户信息。</span><br></pre></td></tr></table></figure>

<h3 id="启动geth并开启远程RPC然后log输出到output-log里面"><a href="#启动geth并开启远程RPC然后log输出到output-log里面" class="headerlink" title="启动geth并开启远程RPC然后log输出到output.log里面"></a>启动geth并开启远程RPC然后log输出到output.log里面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\gethData&gt;geth --datadir . --networkid 15 --rpc console   2&gt; ouput.log</span><br><span class="line">D:\gethData&gt;geth --datadir data --networkid 123 --nodiscover console</span><br><span class="line">	--networkid 123参数表示区块链网络ID标识，--nodiscover参数表示节点私有，console参数表示进入geth控制台。</span><br><span class="line">	连接测试网进入控制台，此时我们已经进入geth测试网的交互式控制台，窗口也显示「Welcome to the Geth JavaScript console」成功提示！</span><br></pre></td></tr></table></figure>

<h3 id="发送一比交易："><a href="#发送一比交易：" class="headerlink" title="发送一比交易："></a>发送一比交易：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">personal.sendTransaction(&#123;from: <span class="string">&quot;0xaC58C330aC8fF04fF828684d3FFABEFE987de7cb&quot;</span> , to: eth.accounts[0] , value: web3.toWei(100 , <span class="string">&quot;ether&quot;</span>)&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="查询账户余额且以ether方式显示"><a href="#查询账户余额且以ether方式显示" class="headerlink" title="查询账户余额且以ether方式显示"></a>查询账户余额且以ether方式显示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web3.fromWei(eth.getBalance(<span class="string">&quot;0xaC58C330aC8fF04fF828684d3FFABEFE987de7cb&quot;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="查询账户列表"><a href="#查询账户列表" class="headerlink" title="查询账户列表"></a>查询账户列表</h3><ul>
<li>输入指令：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eth.accounts</span><br><span class="line">- 输出结果：[]</span><br><span class="line">- 含义：意思是无账户地址，因为我们什么也没做，所以当然是不会凭空出现账户了。</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="创建新账户"><a href="#创建新账户" class="headerlink" title="创建新账户"></a>创建新账户</h3><ul>
<li>输入指令：<code>personal.newAccount(&quot;123&quot;)   </code></li>
<li>输出结果：hash</li>
<li>含义：表明账户新建成功，返回账户地址，123为账户密码。此时我们再次查询账户列表会发现已有刚创建的地址了。</li>
</ul>
<h3 id="查询账户余额"><a href="#查询账户余额" class="headerlink" title="查询账户余额"></a>查询账户余额</h3><ul>
<li>输入指令：<code>eth.getBalance(eth.accounts[0])   </code> </li>
<li>输出结果：0</li>
<li>含义：表明这个账户的余额是0。</li>
</ul>
<h3 id="启动或停止挖矿"><a href="#启动或停止挖矿" class="headerlink" title="启动或停止挖矿"></a>启动或停止挖矿</h3><ul>
<li>输入指令：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">miner.start();</span><br><span class="line">admin.sleepBlocks(1);</span><br><span class="line">miner.stop()</span><br></pre></td></tr></table></figure>

<ul>
<li>输入指令：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eth.getBalance(eth.accounts[0])<span class="comment">#查询余额</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Geth Console 是一个交互式的 JavaScript 执行环境， 里面内置了一些用来操作以太坊的 JavaScript</span><br><span class="line">对象， 我们可以直接调用这些对象来获取区块链上的相关信息。这些对象主要包括：</span><br><span class="line">eth： 主要包含对区块链进行访问和交互相关的方法；</span><br><span class="line">net： 主要包含查看 p2p 网络状态的方法；</span><br><span class="line">admin： 主要包含与管理节点相关的方法；</span><br><span class="line">miner： 主要包含挖矿相关的一些方法；</span><br><span class="line">personal：包含账户管理的方法；</span><br><span class="line">txpool：包含查看交易内存池的方法；</span><br><span class="line">web3：包含以上所有对象，还包含一些通用方法。</span><br><span class="line">常用命令有：</span><br><span class="line">personal.newAccount()：创建账户；</span><br><span class="line">personal.unlockAccount()：解锁账户；</span><br><span class="line">eth.accounts： 列出系统中的账户；</span><br><span class="line">eth.getBalance()：查看账户余额，返回值的单位是 Wei；</span><br><span class="line">eth.blockNumber：列出当前区块高度；</span><br><span class="line">eth.getTransaction()：获取交易信息；</span><br><span class="line">eth.getBlock()：获取区块信息；</span><br><span class="line">miner.start()：开始挖矿；</span><br><span class="line">miner.stop()：停止挖矿；</span><br><span class="line">web3.fromWei()： Wei 换算成以太币；</span><br><span class="line">web3.toWei()：以太币换算成 Wei；</span><br><span class="line">txpool.status：交易池中的状态； </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line">	admin</span><br><span class="line">		&gt; admin</span><br><span class="line">		&#123;</span><br><span class="line">		  datadir: <span class="string">&quot;D:\\gethData&quot;</span>,</span><br><span class="line">		  nodeInfo: &#123;</span><br><span class="line">		    enode: <span class="string">&quot;enode://fac072814049255eb2f4c8c2c381183d87ee519d93600852cdcabd7dc3d9224d916be319bb2bfed89430112225f338d9dc15ea818f89cd242e46a05dd6bd63a7@192.168.136.117:30303&quot;</span>,</span><br><span class="line">		    enr: <span class="string">&quot;enr:-Je4QFYrz1dcrKYsGSKlFZARRs4T6pki558pyHzIb1294oLWfgVCCLANovQUjqPjxi7jqfHjS_Elg3BI97K7JyFtbVACg2V0aMfGhMmaRmeAgmlkgnY0gmlwhMCoiHWJc2VjcDI1NmsxoQP6wHKBQEklXrL0yMLDgRg9h-5RnZNgCFLNyr19w9kiTYN0Y3CCdl-DdWRwgnZf&quot;</span>,</span><br><span class="line">		    id: <span class="string">&quot;8a2d0a9309f63565292f84e6286532af5abc27df6abfb93f49c0d2d077b9666d&quot;</span>,</span><br><span class="line">		    ip: <span class="string">&quot;192.168.136.117&quot;</span>,</span><br><span class="line">		    listenAddr: <span class="string">&quot;[::]:30303&quot;</span>,</span><br><span class="line">		    name: <span class="string">&quot;Geth/v1.9.23-stable-8c2f2715/windows-amd64/go1.15&quot;</span>,</span><br><span class="line">		    ports: &#123;</span><br><span class="line">		      discovery: 30303,</span><br><span class="line">		      listener: 30303</span><br><span class="line">		    &#125;,</span><br><span class="line">		    protocols: &#123;</span><br><span class="line">		      eth: &#123;</span><br><span class="line">			config: &#123;...&#125;,</span><br><span class="line">			difficulty: 2000,</span><br><span class="line">			genesis: <span class="string">&quot;0xdc9866ac4601761e6b960e690eb144c03dd48e7125c99e14ecf0a0af5d739224&quot;</span>,</span><br><span class="line">			head: <span class="string">&quot;0xdc9866ac4601761e6b960e690eb144c03dd48e7125c99e14ecf0a0af5d739224&quot;</span>,</span><br><span class="line">			network: 16</span><br><span class="line">		      &#125;</span><br><span class="line">		    &#125;</span><br><span class="line">		  &#125;,</span><br><span class="line">		  peers: [&#123;</span><br><span class="line">		      caps: [<span class="string">&quot;eth/63&quot;</span>],</span><br><span class="line">		      enode: <span class="string">&quot;enode://8192f9e5cfa8fb73e914c39e830211ab2b98d6180df1cf009c1b1c9ddad3bb6d09d986db5ee125f4bb59c226014e72975f170c734774cc389ccb6e6f73fcce34@174.138.19.97:1234&quot;</span>,</span><br><span class="line">		      id: <span class="string">&quot;f227374bcd5f39fff43a333f04cbe43393f5db0baf5eb4ebddd9c8a9ae6fdfbe&quot;</span>,</span><br><span class="line">		      name: <span class="string">&quot;Geth/v1.0.0-stable-7e368c8e/linux-amd64/go1.12.10&quot;</span>,</span><br><span class="line">		      network: &#123;</span><br><span class="line">			inbound: <span class="literal">false</span>,</span><br><span class="line">			localAddress: <span class="string">&quot;192.168.1.118:50638&quot;</span>,</span><br><span class="line">			remoteAddress: <span class="string">&quot;174.138.19.97:1234&quot;</span>,</span><br><span class="line">			static: <span class="literal">false</span>,</span><br><span class="line">			trusted: <span class="literal">false</span></span><br><span class="line">		      &#125;,</span><br><span class="line">		      protocols: &#123;</span><br><span class="line">			eth: <span class="string">&quot;handshake&quot;</span></span><br><span class="line">		      &#125;</span><br><span class="line">		  &#125;, &#123;</span><br><span class="line">		      caps: [<span class="string">&quot;eth/63&quot;</span>, <span class="string">&quot;eth/64&quot;</span>, <span class="string">&quot;eth/65&quot;</span>],</span><br><span class="line">		      enode: <span class="string">&quot;enode://5928e6c7a1b9c90014b5b5ef5fbd305636b477f2e35b5c608ed7fae82e0ea3295be2c716ec50de640e5b0665c44f652cde5c9f3a6e4bcf134657a6944cd91d39@149.5.29.162:30303&quot;</span>,</span><br><span class="line">		      id: <span class="string">&quot;f24d4969e9e4f171b36d962f15ea1bc25b037731a99eee25887b02d1437d09ac&quot;</span>,</span><br><span class="line">		      name: <span class="string">&quot;Pirl/v1.9.12-v7-masternode-premium-lion-ea07aebf-20200407/linux-amd64/go1.13.6&quot;</span>,</span><br><span class="line">		      network: &#123;</span><br><span class="line">			inbound: <span class="literal">false</span>,</span><br><span class="line">			localAddress: <span class="string">&quot;192.168.1.118:50661&quot;</span>,</span><br><span class="line">			remoteAddress: <span class="string">&quot;149.5.29.162:30303&quot;</span>,</span><br><span class="line">			static: <span class="literal">false</span>,</span><br><span class="line">			trusted: <span class="literal">false</span></span><br><span class="line">		      &#125;,</span><br><span class="line">		      protocols: &#123;</span><br><span class="line">			eth: <span class="string">&quot;handshake&quot;</span></span><br><span class="line">		      &#125;</span><br><span class="line">		  &#125;],</span><br><span class="line">		  addPeer: <span class="keyword">function</span>(),</span><br><span class="line">		  addTrustedPeer: <span class="keyword">function</span>(),</span><br><span class="line">		  clearHistory: <span class="keyword">function</span>(),</span><br><span class="line">		  exportChain: <span class="keyword">function</span>(),</span><br><span class="line">		  getDatadir: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getNodeInfo: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getPeers: <span class="keyword">function</span>(callback),</span><br><span class="line">		  importChain: <span class="keyword">function</span>(),</span><br><span class="line">		  removePeer: <span class="keyword">function</span>(),</span><br><span class="line">		  removeTrustedPeer: <span class="keyword">function</span>(),</span><br><span class="line">		  sleep: <span class="keyword">function</span>(),</span><br><span class="line">		  sleepBlocks: <span class="keyword">function</span>(),</span><br><span class="line">		  startRPC: <span class="keyword">function</span>(),</span><br><span class="line">		  startWS: <span class="keyword">function</span>(),</span><br><span class="line">		  stopRPC: <span class="keyword">function</span>(),</span><br><span class="line">		  stopWS: <span class="keyword">function</span>()</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">personal</span><br><span class="line">		&gt; personal</span><br><span class="line">		&#123;</span><br><span class="line">		  listAccounts: [<span class="string">&quot;0xc59256c9f92d19e877d4a9931652ccbcd1260076&quot;</span>],</span><br><span class="line">		  listWallets: [&#123;</span><br><span class="line">		      accounts: [&#123;...&#125;],</span><br><span class="line">		      status: <span class="string">&quot;Locked&quot;</span>,</span><br><span class="line">		      url: <span class="string">&quot;keystore://D:\\gethData\\keystore\\UTC--2020-11-10T00-51-59.108912200Z--c59256c9f92d19e877d4a9931652ccbcd1260076&quot;</span></span><br><span class="line">		  &#125;],</span><br><span class="line">		  deriveAccount: <span class="keyword">function</span>(),</span><br><span class="line">		  ecRecover: <span class="keyword">function</span>(),</span><br><span class="line">		  getListAccounts: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getListWallets: <span class="keyword">function</span>(callback),</span><br><span class="line">		  importRawKey: <span class="keyword">function</span>(),</span><br><span class="line">		  initializeWallet: <span class="keyword">function</span>(),</span><br><span class="line">		  lockAccount: <span class="keyword">function</span>(),</span><br><span class="line">		  newAccount: <span class="keyword">function</span>(),</span><br><span class="line">		  openWallet: <span class="keyword">function</span>(),</span><br><span class="line">		  sendTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  sign: <span class="keyword">function</span>(),</span><br><span class="line">		  signTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  unlockAccount: <span class="keyword">function</span>(),</span><br><span class="line">		  unpair: <span class="keyword">function</span>()</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">miner</span><br><span class="line">		&gt; miner</span><br><span class="line">		&#123;</span><br><span class="line">		  getHashrate: <span class="keyword">function</span>(),</span><br><span class="line">		  setEtherbase: <span class="keyword">function</span>(),</span><br><span class="line">		  setExtra: <span class="keyword">function</span>(),</span><br><span class="line">		  setGasPrice: <span class="keyword">function</span>(),</span><br><span class="line">		  setRecommitInterval: <span class="keyword">function</span>(),</span><br><span class="line">		  start: <span class="keyword">function</span>(),</span><br><span class="line">		  stop: <span class="keyword">function</span>()</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">eth</span><br><span class="line">		&gt; eth</span><br><span class="line">		&#123;</span><br><span class="line">		  accounts: [<span class="string">&quot;0xc59256c9f92d19e877d4a9931652ccbcd1260076&quot;</span>],</span><br><span class="line">		  blockNumber: 0,</span><br><span class="line">		  coinbase: <span class="string">&quot;0xc59256c9f92d19e877d4a9931652ccbcd1260076&quot;</span>,</span><br><span class="line">		  compile: &#123;</span><br><span class="line">		    lll: <span class="keyword">function</span>(),</span><br><span class="line">		    serpent: <span class="keyword">function</span>(),</span><br><span class="line">		    solidity: <span class="keyword">function</span>()</span><br><span class="line">		  &#125;,</span><br><span class="line">		  defaultAccount: undefined,</span><br><span class="line">		  defaultBlock: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">		  gasPrice: 1000000000,</span><br><span class="line">		  hashrate: 0,</span><br><span class="line">		  mining: <span class="literal">false</span>,</span><br><span class="line">		  pendingTransactions: [],</span><br><span class="line">		  protocolVersion: <span class="string">&quot;0x41&quot;</span>,</span><br><span class="line">		  syncing: <span class="literal">false</span>,</span><br><span class="line">		  call: <span class="keyword">function</span>(),</span><br><span class="line">		  chainId: <span class="keyword">function</span>(),</span><br><span class="line">		  contract: <span class="keyword">function</span>(abi),</span><br><span class="line">		  estimateGas: <span class="keyword">function</span>(),</span><br><span class="line">		  fillTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  filter: <span class="keyword">function</span>(options, callback, filterCreationErrorCallback),</span><br><span class="line">		  getAccounts: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getBalance: <span class="keyword">function</span>(),</span><br><span class="line">		  getBlock: <span class="keyword">function</span>(),</span><br><span class="line">		  getBlockByHash: <span class="keyword">function</span>(),</span><br><span class="line">		  getBlockByNumber: <span class="keyword">function</span>(),</span><br><span class="line">		  getBlockNumber: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getBlockTransactionCount: <span class="keyword">function</span>(),</span><br><span class="line">		  getBlockUncleCount: <span class="keyword">function</span>(),</span><br><span class="line">		  getCode: <span class="keyword">function</span>(),</span><br><span class="line">		  getCoinbase: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getCompilers: <span class="keyword">function</span>(),</span><br><span class="line">		  getGasPrice: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getHashrate: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getHeaderByHash: <span class="keyword">function</span>(),</span><br><span class="line">		  getHeaderByNumber: <span class="keyword">function</span>(),</span><br><span class="line">		  getMining: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getPendingTransactions: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getProof: <span class="keyword">function</span>(),</span><br><span class="line">		  getProtocolVersion: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getRawTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  getRawTransactionFromBlock: <span class="keyword">function</span>(),</span><br><span class="line">		  getStorageAt: <span class="keyword">function</span>(),</span><br><span class="line">		  getSyncing: <span class="keyword">function</span>(callback),</span><br><span class="line">		  getTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  getTransactionCount: <span class="keyword">function</span>(),</span><br><span class="line">		  getTransactionFromBlock: <span class="keyword">function</span>(),</span><br><span class="line">		  getTransactionReceipt: <span class="keyword">function</span>(),</span><br><span class="line">		  getUncle: <span class="keyword">function</span>(),</span><br><span class="line">		  getWork: <span class="keyword">function</span>(),</span><br><span class="line">		  iban: <span class="keyword">function</span>(iban),</span><br><span class="line">		  icapNamereg: <span class="keyword">function</span>(),</span><br><span class="line">		  isSyncing: <span class="keyword">function</span>(callback),</span><br><span class="line">		  namereg: <span class="keyword">function</span>(),</span><br><span class="line">		  resend: <span class="keyword">function</span>(),</span><br><span class="line">		  sendIBANTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  sendRawTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  sendTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  sign: <span class="keyword">function</span>(),</span><br><span class="line">		  signTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  submitTransaction: <span class="keyword">function</span>(),</span><br><span class="line">		  submitWork: <span class="keyword">function</span>()</span><br><span class="line">		&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BlockChain/" rel="tag">BlockChain</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Geth/" rel="tag">Geth</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-Hexo-本地图片-md"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/13/Hexo-%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87-md/"
    >Hexo_本地图片如何上传到Github</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/13/Hexo-%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87-md/" class="article-date">
  <time datetime="2020-11-13T09:49:25.000Z" itemprop="datePublished">2020-11-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Hexo/">Hexo</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h2><ul>
<li>首先进行配置文件的修改， _config.yml(不是主题配置文件)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<img src="/2020/11/13/Hexo-%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87-md/1.png" alt="修改配置项"><h2 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<img src="/2020/11/13/Hexo-%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87-md/2.png" alt="install"><h2 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h2></li>
<li>通过命令，创建一篇新的文章时候，自动在source/_post/新建对应文件名称的文件夹（为了避免有时候文章中并没有图片，可以手动创建md文件，需要图片在创建文件夹即可）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new test.md</span><br></pre></td></tr></table></figure></li>
<li>进入source/_post/下即可看到对应创建的文件和文件夹<h2 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  <span class="comment">#清除</span></span><br><span class="line">hexo ge    <span class="comment">#生成静态资源 ， 此时可以通过输出信息看到对应的图片名称信息，基本就完成了</span></span><br><span class="line">hexo s     <span class="comment">#本地查看是否生效</span></span><br></pre></td></tr></table></figure>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2></li>
<li>在md文件中，图片的路径可以写一下两种方式都可以load到图片的路径<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">![test1](./1.png)</span><br><span class="line">![test1](./<span class="built_in">test</span>/2.png)</span><br></pre></td></tr></table></figure>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-git"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/13/git/"
    >Git基本用法</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/13/git/" class="article-date">
  <time datetime="2020-11-13T09:49:25.000Z" itemprop="datePublished">2020-11-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Git/">Git</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Git-入门"><a href="#Git-入门" class="headerlink" title="Git 入门"></a>Git 入门</h2><pre><code> 默认linux自带Git , 可以进行更新。</code></pre>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git -y <span class="comment">#安装git </span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config </span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 ~]<span class="comment"># git config </span></span><br><span class="line">用法：git config [选项]</span><br><span class="line"></span><br><span class="line">配置文件位置</span><br><span class="line">    --global              使用全局配置文件</span><br><span class="line">    --system              使用系统级配置文件</span><br><span class="line">    --<span class="built_in">local</span>               使用版本库级配置文件</span><br><span class="line">    -f, --file &lt;文件&gt;     使用指定的配置文件</span><br><span class="line">    --blob &lt;blob-id&gt;      <span class="built_in">read</span> config from given blob object</span><br><span class="line"></span><br><span class="line">操作</span><br><span class="line">    --get                 获取值：name [value-regex]</span><br><span class="line">    --get-all             获得所有的值：key [value-regex]</span><br><span class="line">    --get-regexp          根据正则表达式获得值：name-regex [value-regex]</span><br><span class="line">    --replace-all         替换所有匹配的变量：name value [value_regex]</span><br><span class="line">    --add                 添加一个新的变量：name value</span><br><span class="line">    --<span class="built_in">unset</span>               删除一个变量：name [value-regex]</span><br><span class="line">    --unset-all           删除所有匹配项：name [value-regex]</span><br><span class="line">    --rename-section      重命名小节：old-name new-name</span><br><span class="line">    --remove-section      删除一个小节：name</span><br><span class="line">    -l, --list            列出所有</span><br><span class="line">    -e, --edit            打开一个编辑器</span><br><span class="line">    --get-color &lt;slot&gt;    找到配置的颜色：[默认]</span><br><span class="line">    --get-colorbool &lt;slot&gt;</span><br><span class="line">                          找到颜色设置：[stdout-is-tty]</span><br><span class="line">类型</span><br><span class="line">    --bool                值是 <span class="string">&quot;true&quot;</span> 或 <span class="string">&quot;false&quot;</span></span><br><span class="line">    --int                 值是十进制数</span><br><span class="line">    --bool-or-int         值是 --bool or --int</span><br><span class="line">    --path                值是一个路径（文件或目录名）</span><br><span class="line"></span><br><span class="line">其它</span><br><span class="line">    -z, --null            终止值是NUL字节</span><br><span class="line">    --includes            查询时参照 include 指令递归查找</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第一步-首先配置Git的本地用户信息，用于提交到本地仓库认证，否则不予提交"><a href="#第一步-首先配置Git的本地用户信息，用于提交到本地仓库认证，否则不予提交" class="headerlink" title="第一步 首先配置Git的本地用户信息，用于提交到本地仓库认证，否则不予提交"></a>第一步 首先配置Git的本地用户信息，用于提交到本地仓库认证，否则不予提交</h2><ul>
<li>配置是哪个用户使用git</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 ~]<span class="comment"># git config --global user.email &quot;aayxyj@163.com&quot;</span></span><br><span class="line"></span><br><span class="line">[root@zzuxyj7 ~]<span class="comment"># git config --global user.name &quot;zzuxyj&quot;</span></span><br><span class="line"></span><br><span class="line">[root@zzuxyj7 ~]<span class="comment"># git config --global color.ui true  //高亮</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 ~]<span class="comment"># git config --list</span></span><br><span class="line">user.name=zzuxyj</span><br><span class="line">user.email=aayxyj@163.com</span><br><span class="line">color.ui=<span class="literal">true</span></span><br><span class="line">[root@zzuxyj7 ~]<span class="comment"># cat .gitconfig </span></span><br><span class="line">[user]</span><br><span class="line">    name = zzuxyj</span><br><span class="line">    email = aayxyj@163.com</span><br><span class="line">[color]</span><br><span class="line">    ui = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第二步-创建文件夹并进行初始化，该目录即为本地仓库"><a href="#第二步-创建文件夹并进行初始化，该目录即为本地仓库" class="headerlink" title="第二步 创建文件夹并进行初始化，该目录即为本地仓库"></a>第二步 创建文件夹并进行初始化，该目录即为本地仓库</h2><ul>
<li>创建本地仓库<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir gitdata <span class="comment">#创建目录</span></span><br><span class="line"><span class="built_in">cd</span> gitdata    <span class="comment">#进入目录</span></span><br><span class="line">git  init  <span class="comment">#初始化仓库  初始化空的 Git 版本库于 /root/gitdata/.git/</span></span><br></pre></td></tr></table></figure></li>
<li>本地仓库信息<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">隐藏文件介绍︰</span><br><span class="line">branches <span class="comment"># 分支目录</span></span><br><span class="line">config<span class="comment"># 定义项目特有的配置选项</span></span><br><span class="line">description<span class="comment"># 仅供git web程序使用</span></span><br><span class="line">HEAD <span class="comment">#指示当前的分支</span></span><br><span class="line">hooks <span class="comment"># 包含git钩子文件</span></span><br><span class="line">info <span class="comment">#包含一个全局排除文件(exclude文件)</span></span><br><span class="line">objects <span class="comment"># 存放所有数据内容，有info和pack两个子文件夹</span></span><br><span class="line">refrs <span class="comment"># 存放指向数据(分支)的提交对象的指针</span></span><br><span class="line">index <span class="comment">#保存暂存区信息，在执行git init的时候，这个文件还没有</span></span><br></pre></td></tr></table></figure></li>
<li>查看初始的git版本库的结构<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># tree .git/</span></span><br><span class="line">.git/</span><br><span class="line">├── branches</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── objects</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    └── tags</span><br></pre></td></tr></table></figure>
<h2 id="第三步-开始进行代码或文件的CURD操作"><a href="#第三步-开始进行代码或文件的CURD操作" class="headerlink" title="第三步 开始进行代码或文件的CURD操作"></a>第三步 开始进行代码或文件的CURD操作</h2></li>
<li>提交为空，但是存在尚未跟踪的文件（使用 “git add” 建立跟踪）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># git add 1.go  #跟踪</span></span><br><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># git status    #查看git仓库的状态，可以看到跟踪的文件</span></span><br></pre></td></tr></table></figure></li>
<li>提交跟踪文件后，需要删除时候<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># git rm 1.go   #删除跟踪</span></span><br><span class="line">rm <span class="string">&#x27;1.go&#x27;</span></span><br><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># git status    #查看git仓库的状态，文件已经被删除</span></span><br></pre></td></tr></table></figure></li>
<li>建立文件跟踪后，如果需要提交到本地仓库还是需要进行commit提交才可以到本地仓库<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zzuxyj7 gitdata]<span class="comment"># git commit -m &quot;Test&quot;</span></span><br><span class="line">[master（根提交） b58f049] Test</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 1.go</span><br></pre></td></tr></table></figure>
<h2 id="注-：常用的git命令"><a href="#注-：常用的git命令" class="headerlink" title="注 ：常用的git命令"></a>注 ：常用的git命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">1.git init<span class="comment">#初始化仓库把一个目录初始化为版本仓库〈可以是空的目录也可以是带内容的目录)</span></span><br><span class="line">2.git status<span class="comment">#查看当前仓库的状态</span></span><br><span class="line">3.git add file<span class="comment">#添加文件到暂存区</span></span><br><span class="line">4.git add .或者git add * <span class="comment">#添加当前所有的文件到暂存区</span></span><br><span class="line">5.git rm --cached<span class="comment">#撤出暂存区</span></span><br><span class="line">6.git rm -f<span class="comment">#同时删除工作目录和暂存区的文件</span></span><br><span class="line">7.git commit -m<span class="comment">#从缓存区提交到本地仓库</span></span><br><span class="line">8.git mv old-filename new-filename<span class="comment">#直接更改文件名称更改完直接commit提交即可</span></span><br><span class="line">9.git diff<span class="comment">#默认比对工作目录和暂存区有什么不同</span></span><br><span class="line">10.git diff --cached <span class="comment">#比对暂存区域和本地仓库</span></span><br><span class="line">11.<span class="comment">#如果某个文件已经被仓库管理,如果在更改此文件直接需要一条命令提交即可</span></span><br><span class="line">	git commit -am <span class="string">&quot;add newfile&quot;</span></span><br><span class="line">12.git <span class="built_in">log</span><span class="comment">#查看历史提交过的信息</span></span><br><span class="line">	-p <span class="comment">#查看具体的改动</span></span><br><span class="line">	-1<span class="comment">#查看最近一次</span></span><br><span class="line">13.git reset --hard 295e997 <span class="comment">#回滚数据到某一个提交</span></span><br><span class="line">14.git <span class="built_in">log</span> --oneline --decorate<span class="comment">#查看当前指针的指向</span></span><br><span class="line">15.git <span class="built_in">log</span> --reflog <span class="comment">#查看所有镜像</span></span><br><span class="line">15.git branch<span class="comment">#查看分支  * 号在那就在那个分支上</span></span><br><span class="line">16.git branch testing<span class="comment">#创建一个测试分支</span></span><br><span class="line">17.git checkout testing<span class="comment">#切换到测试分支</span></span><br><span class="line">18.git checkout -b testing<span class="comment">#创建并切换到testing分支</span></span><br><span class="line">19.git tag<span class="comment">#打标签</span></span><br><span class="line">	-d删除标签</span><br><span class="line">	git tag -d v1.0  <span class="comment">#删除标签</span></span><br><span class="line">	git tag -a <span class="string">&quot;v2.0&quot;</span> -m <span class="string">&quot;xxx&quot;</span>  <span class="comment">#打标签</span></span><br><span class="line">	git show v1.0  <span class="comment">#查看版本信息</span></span><br><span class="line"></span><br><span class="line">20.git  remote add origin git@github.com:ayxyj/ayxyj.github.io.git  //添加远程仓库</span><br><span class="line"></span><br><span class="line">	git remote  <span class="comment">#查看远程仓库</span></span><br><span class="line"></span><br><span class="line">21.git <span class="built_in">clone</span> url </span><br><span class="line"></span><br><span class="line">	标签也是指向了一次commit提交，是一个里程碑式的标签，回滚打标签直接加标签号，不需要加唯一字符串不好记</span><br><span class="line">	[root@git git_data]<span class="comment"># git tag -a v1.0 -m &quot;aaa bbb master tesing version v1.0”#  -a指定标签名字  -m指定说明文字</span></span><br><span class="line">	[root@git git_data]<span class="comment"># git tagv1.0</span></span><br><span class="line">	[root@git git_data]<span class="comment"># git tag -a v2.0 dbead4c  -m &quot;add bbb version v2.0&quot;  #指定某一次的提交</span></span><br><span class="line">	为标签</span><br><span class="line">	[root@git git_data]<span class="comment"># git show v1.0  #查看v1.0的信息git show加标签查看</span></span><br><span class="line">	[root@git git_data]<span class="comment"># git reset --hard v2.0#直接还原数据到v2.0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="最后如何把本地仓库推送到远程仓库步骤："><a href="#最后如何把本地仓库推送到远程仓库步骤：" class="headerlink" title="最后如何把本地仓库推送到远程仓库步骤："></a>最后如何把本地仓库推送到远程仓库步骤：</h2><ul>
<li><p>第一种方式每次手动写远程仓库地址</p>
</li>
<li><p>1.首先先把本地代码提交到本地仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . </span><br><span class="line">git commit -m <span class="string">&quot;add file !&quot;</span> </span><br><span class="line">git  commit -am <span class="string">&quot;add file !&quot;</span> </span><br></pre></td></tr></table></figure>
</li>
<li><p>2.其次再把本地仓库的代码提交到远程仓库上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add gocode git@github.com:ayxyj/ayxyj.github.io.git  <span class="comment">#添加远程仓库</span></span><br><span class="line">git push -u gocode master <span class="comment">#第一次提交到远程仓库的master分支上</span></span><br><span class="line">git push gocode master <span class="comment">#之后提交</span></span><br></pre></td></tr></table></figure></li>
<li><p>3.删除本地分支和远程分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -d master <span class="comment">#删除本地分支、注意删除时候应该切换到其他分支才可以删除分支</span></span><br><span class="line">git push gocode --delete master <span class="comment">#删除远程仓库下的mater分支</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4.合并本地分支和远程分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">基本流程</span><br><span class="line">0.查看远程仓库</span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">1.本地创建一个与新分支并且关联远程分支</span><br><span class="line">git checkout -b dev gocode/dev </span><br><span class="line">这时 dev 已经和远程的 gocode/dev 一致了。</span><br><span class="line"></span><br><span class="line">同上1.查看到远程有一个叫gocode的仓库，我们可以使用如下命令从gocode远程仓库获取最新版本的代码。</span><br><span class="line">git fetch origin master:temp</span><br><span class="line">上面代码的意思是：从远程的gocode仓库的master分支下载到本地，并新建一个temp分支。</span><br><span class="line"></span><br><span class="line">2.查看temp分支与本地原有分支的不同</span><br><span class="line">git diff temp</span><br><span class="line"></span><br><span class="line">3. 切换回本地的 master 版本</span><br><span class="line">git checkout master </span><br><span class="line"></span><br><span class="line">4. 将本地的 dev 合并到 master</span><br><span class="line">git merge dev </span><br><span class="line"></span><br><span class="line">5. 将本地的 master 推到远程</span><br><span class="line">git push gocode master </span><br><span class="line"></span><br><span class="line">6. 将远程的 dev 版本删除</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二种方式在配置文件中配置远程仓库的地址（需要做ssh认证）</p>
<ul>
<li>生成ssh公私钥<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;aayxyj@163.com&quot;</span></span><br><span class="line">cat ~/.ssh/id_rsa.pub <span class="comment">#将查看到的公钥在github的个人设置中新建ssh密码填入即可</span></span><br></pre></td></tr></table></figure></li>
<li>在配置文件中添加信息<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: 这里填刚记录的github <span class="built_in">clone</span>仓库地址</span><br><span class="line">  branch: master <span class="comment">#上传到那个分支上</span></span><br></pre></td></tr></table></figure></li>
<li>接下来就可以直接push即可</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-sublime配置"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/13/sublime%E9%85%8D%E7%BD%AE/"
    >Sublime 乱码问题及插件安装</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/13/sublime%E9%85%8D%E7%BD%AE/" class="article-date">
  <time datetime="2020-11-13T02:21:29.000Z" itemprop="datePublished">2020-11-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Sublime/">Sublime</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="sublime-解决中文乱码问题"><a href="#sublime-解决中文乱码问题" class="headerlink" title="sublime 解决中文乱码问题"></a>sublime 解决中文乱码问题</h2><h3 id="1-通过快捷键-ctrl-进入命令行，并输入以下命令然后回车"><a href="#1-通过快捷键-ctrl-进入命令行，并输入以下命令然后回车" class="headerlink" title="1.通过快捷键 ctrl + ~ 进入命令行，并输入以下命令然后回车"></a>1.通过快捷键 ctrl + ~ 进入命令行，并输入以下命令然后回车</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os,hashlib; h = <span class="string">&#x27;7183a2d3e96f11eeadd761d777e62404e330c659d4bb41d3bdf022e94cab3cd0&#x27;</span>; pf = <span class="string">&#x27;Package Control.sublime-package&#x27;</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class="string">&#x27;http://sublime.wbond.net/&#x27;</span> + pf.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;%20&#x27;</span>)).<span class="built_in">read</span>(); dh = hashlib.sha256(by).hexdigest(); <span class="built_in">print</span>(<span class="string">&#x27;Error validating download (got %s instead of %s), please try manual install&#x27;</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> open(os.path.join( ipp, pf), <span class="string">&#x27;wb&#x27;</span> ).write(by)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>这是由于网络访问网站<a target="_blank" rel="noopener" href="http://packagecontrol.io/%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E6%88%90%E5%8A%9F%E5%AF%BC%E8%87%B4%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E7%A1%AE%E4%BF%9D%E8%83%BD%E5%A4%9F%E8%AE%BF%E9%97%AE%E8%AF%A5%E7%BD%91%E5%9D%80%E6%97%B6%E6%89%8D%E8%83%BD%E7%BB%A7%E7%BB%AD%E5%AE%89%E8%A3%85%EF%BC%8C%E8%BF%99%E9%87%8C%E6%88%91%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E7%9A%84%E6%96%B9%E5%BC%8F%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%E5%8F%88%E5%87%BA%E7%8E%B0%E4%BA%86%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A">http://packagecontrol.io/无法访问成功导致的，所以确保能够访问该网址时才能继续安装，这里我直接通过科学上网的方式就可以访问了，但是又出现了下面的问题：</a></p>
</li>
<li><p>根据报错信息将该命令中的str1 字符串换成str2再重试即可发现成功</p>
</li>
</ul>
<h3 id="2-安装ConvertToUTF8。"><a href="#2-安装ConvertToUTF8。" class="headerlink" title="2.安装ConvertToUTF8。"></a>2.安装ConvertToUTF8。</h3><ul>
<li><p>通过快捷键 Ctrl + shift + P，然后在弹出的输入框输入 install，选择Package Control：install Package回车</p>
</li>
<li><p>在出现的插件命令行搜索ConvertToUTF8，选中回车进行插件安装</p>
</li>
<li><p>重启Sublime Text 3后再次打开之前中文乱码的文件发现，中文能够正常显示</p>
</li>
</ul>
<h2 id="sublime-主题和字体"><a href="#sublime-主题和字体" class="headerlink" title="sublime 主题和字体"></a>sublime 主题和字体</h2><ul>
<li><p>通过快捷键 Ctrl + shift + P ，然后在弹出的输入框输入 install，选择Package Control：install Package回车</p>
</li>
<li><p>在出现的插件命令行搜索Themes：ayu/edge  Font：Consoles</p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sublime/" rel="tag">Sublime</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
    <article
  id="post-fb"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/11/11/fb/"
    >FISCO BCOS - 01 - 入门</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/11/11/fb/" class="article-date">
  <time datetime="2020-11-11T06:38:59.000Z" itemprop="datePublished">2020-11-11</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/FISCO-BCOS/">FISCO BCOS</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h1><p>本章介绍FISCO BCOS所需的必要安装和配置。本章通过在单机上部署一条4节点的FISCO BCOS联盟链，帮助用户掌握FISCO BCOS部署流程。请<a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/hardware_requirements.html">根据这里</a>使用支持的<strong>硬件和平台</strong>操作。</p>
<p>安装FISCOBCOS：<a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/installation.html">https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/installation.html</a></p>
<p>国密：<a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/account.html">https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/account.html</a></p>
<p><strong>单群组**</strong>FISCO BCOS**<strong>联盟链的搭建</strong></p>
<h2 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a><strong>准备环境</strong></h2><h3 id="安装centos依赖"><a href="#安装centos依赖" class="headerlink" title="安装centos依赖"></a>安装centos依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y openssl openssl-devel</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/11/fb/1.png" alt="1"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~ &amp;&amp; mkdir -p fisco &amp;&amp; <span class="built_in">cd</span> fisco</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​    下载build_chain.sh脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl -<span class="comment">#LO https://github.com/FISCO-BCOS/FISCO-BCOS/releases/download/v2.6.0/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/2.png" alt="2"></p>
<h3 id="搭建单群组-4-节点联盟链"><a href="#搭建单群组-4-节点联盟链" class="headerlink" title="搭建单群组**4**节点联盟链"></a><strong>搭建单群组**</strong>4**<strong>节点联盟链</strong></h3><p>在fisco目录下执行下面的指令，生成一条单群组4节点的FISCO链。 请确保机器的30300<del>30303，20200</del>20203，8545~8548端口没有被占用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">**注解**</span><br><span class="line"></span><br><span class="line">&gt; 国密版本请执行 bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200,8545 -g -G</span><br><span class="line"></span><br><span class="line">&gt; 其中-g表示生成国密配置，-G表示使用国密SSL连接</span><br><span class="line"></span><br><span class="line">&gt; web3sdk已经支持国密SSL，如果使用web3sdk建议带上-G选项使用国密SSL</span><br><span class="line"></span><br><span class="line">bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200,8545</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/11/fb/3.png" alt="3"></p>
<p><strong>注解</strong></p>
<p>其中-p选项指定起始端口，分别是p2p_port,channel_port,jsonrpc_port</p>
<p>出于安全性和易用性考虑，v2.3.0版本最新配置将listen_ip拆分成jsonrpc_listen_ip和channel_listen_ip，但仍保留对listen_ip的解析功能，详细请参考 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/configuration.html#rpc">这里</a></p>
<p>为便于开发和体验，channel_listen_ip参考配置是 <em>0.0.0.0</em> ，出于安全考虑，请根据实际业务网络情况，修改为安全的监听地址，如：内网IP或特定的外网IP</p>
<p>命令执行成功会输出All completed。如果执行出错，请检查nodes/build.log文件中的错误信息。</p>
<p><strong>启动**</strong>FISCO BCOS**<strong>链</strong></p>
<p>启动所有节点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash nodes/127.0.0.1/start_all.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2020/11/11/fb/3.1.png" alt="3.1"></p>
<p>启动成功会输出类似下面内容的响应。否则请使用netstat -an | grep tcp检查机器的30300<del>30303，20200</del>20203，8545~8548端口是否被占用。</p>
<p><strong>检查进程</strong></p>
<p>检查进程是否启动</p>
<p>正常情况会有类似下面的输出； 如果进程数不为4，则进程没有启动（一般是端口被占用导致的）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep -v grep | grep fisco-bcos</span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/4.png" alt="4"></p>
<p><strong>检查日志输出</strong></p>
<p> 如下，查看节点node0链接的节点数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f nodes/127.0.0.1/node0/<span class="built_in">log</span>/<span class="built_in">log</span>*  | grep connected</span><br></pre></td></tr></table></figure>
<p>正常情况会不停地输出链接信息，从输出可以看出node0与另外3个节点有链接。</p>
<p><img src="/2020/11/11/fb/5.png" alt="5"></p>
<p>执行下面指令，检查是否在共识</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f nodes/127.0.0.1/node0/<span class="built_in">log</span>/<span class="built_in">log</span>*  | grep +++</span><br></pre></td></tr></table></figure>
<p>正常情况会不停输出++++Generating seal，表示共识正常。</p>
<p><img src="/2020/11/11/fb/6.png" alt="6"></p>
<p><strong>配置及使用控制台</strong></p>
<p><strong>重要</strong></p>
<p>控制台1.x 系列基于 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/java_sdk.html">Web3SDK</a> 实现，控制台2.6之后 基于 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/java_sdk/index.html">Java SDK</a> 实现，最新版本控制台基于 Java SDK 实现</p>
<p>2.6及其以上版本控制台使用文档请 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/console_of_java_sdk.html">参考这里</a> ，1.x版本控制台使用文档请 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/console.html">参考这里</a></p>
<p>可通过命令 ./start.sh –version 查看当前控制台版本</p>
<p>基于 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/sdk/java_sdk.html">Web3SDK</a> 开发应用时将 solidity 代码转换为 java 代码时，必须使用 1.x 版本控制台，具体请参考 <a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/tutorial/download_console.html">这里</a></p>
<p>在控制台链接FISCO BCOS节点，实现<strong>查询区块链状态、部署调用合约</strong>等功能，能够快速获取到所需要的信息。2.6版本控制台指令详细介绍<a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/console_of_java_sdk.html">参考这里</a>，1.x版本控制台指令详细介绍<a target="_blank" rel="noopener" href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/console.html">参考这里</a>。</p>
<p><strong>准备依赖</strong></p>
<p>安装java</p>
<p><em>#centos<strong>系统安装</strong>java</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y java java-devel</span><br></pre></td></tr></table></figure>
<p>获取控制台并回到fisco目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/fisco &amp;&amp; curl -<span class="comment">#LO https://github.com/FISCO-BCOS/console/releases/download/v2.6.1/download_console.sh &amp;&amp; bash download_console.sh</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/7.png" alt="7"></p>
<p><strong>注解</strong></p>
<p>如果因为网络问题导致长时间无法下载，请尝试 <em>cd ~/fisco &amp;&amp; curl -#LO <a target="_blank" rel="noopener" href="https://gitee.com/FISCO-BCOS/console/raw/master/tools/download_console.sh">https://gitee.com/FISCO-BCOS/console/raw/master/tools/download_console.sh</a></em></p>
<p>拷贝控制台配置文件</p>
<p>若节点未采用默认端口，请将文件中的20200替换成节点对应的channel端口。</p>
<p><em>#</em> <em>最新版本控制台使用如下命令拷贝配置文件</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -n console/conf/config-example.toml console/conf/config.toml</span><br></pre></td></tr></table></figure>
<p>配置控制台证书</p>
<p><strong>注解</strong></p>
<p><strong>使用**</strong>1.x**<strong>版本控制台时：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">搭建国密版时，如果使用国密SSL请执行 cp nodes/127.0.0.1/sdk/gm/* console/conf/</span><br><span class="line"></span><br><span class="line">搭建国密版时，请修改 applicationContext.xml 中 encryptType 修改为1</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r nodes/127.0.0.1/sdk/* console/conf/</span><br></pre></td></tr></table></figure>
<p><strong>启动控制台</strong></p>
<p>启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/fisco/console &amp;&amp; bash start.sh</span><br></pre></td></tr></table></figure>
<p>输出下述信息表明启动成功 否则请检查conf/config.toml中节点端口配置是否正确</p>
<p><img src="/2020/11/11/fb/8.png" alt="8"></p>
<p><strong>使用控制台获取信息</strong></p>
<p><em>#</em> <em>获取客户端版本</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; getNodeVersion</span><br></pre></td></tr></table></figure>

<p><em>#</em> <em>获取节点链接信息</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; getPeers</span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/9.png" alt="9"></p>
<p><strong>部署及调用**</strong>HelloWorld**<strong>合约</strong></p>
<p>HelloWorld合约提供两个接口，分别是get()和set()，用于获取/设置合约变量name。合约内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pragma solidity ^0.4.24;</span><br><span class="line"></span><br><span class="line">contract  HelloWorld &#123;</span><br><span class="line"></span><br><span class="line">    string name;</span><br><span class="line"></span><br><span class="line">    function HelloWorld() &#123;</span><br><span class="line">        name &#x3D; &quot;Hello, World!&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function get()constant returns(string) &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function set(string n) &#123;</span><br><span class="line">        name &#x3D; n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>部署**</strong>HelloWorld**<strong>合约</strong></p>
<p>为了方便用户快速体验，HelloWorld合约已经内置于控制台中，位于控制台目录下contracts/solidity/HelloWorld.sol，参考下面命令部署即可。</p>
<p><em>#</em> <em>在控制台输入以下指令</em> <em>部署成功则返回合约地址</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; deploy HelloWorld</span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/10.png" alt="10"></p>
<p><strong>调用**</strong>HelloWorld**<strong>合约</strong></p>
<p><em>#</em> <em>查看当前块高</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; getBlockNumber</span><br></pre></td></tr></table></figure>
<p><em>#</em> <em>调用<strong>get</strong>接口获取<strong>name</strong>变量</em> <em>此处的合约地址是<strong>deploy</strong>指令返回的地址</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; call HelloWorld 0xb3c223fc0bf6646959f254ac4e4a7e355b50a344 get</span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/11.png" alt="11"></p>
<p><em>#</em> <em>查看当前块高，块高不变，因为<strong>get</strong>接口不更改账本状态</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; getBlockNumber</span><br></pre></td></tr></table></figure>
<p><em>#</em> <em>调用<strong>set</strong>设置**name</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; call HelloWorld 0xb3c223fc0bf6646959f254ac4e4a7e355b50a344 <span class="built_in">set</span> <span class="string">&quot;Hello, FISCO BCOS&quot;</span></span><br></pre></td></tr></table></figure>
<p><em>#</em> <em>再次查看当前块高，块高增加表示已出块，账本状态已更改</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; getBlockNumber</span><br></pre></td></tr></table></figure>
<p><em>#</em> <em>调用<strong>get</strong>接口获取<strong>name</strong>变量，检查设置是否生效</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; call HelloWorld 0xb3c223fc0bf6646959f254ac4e4a7e355b50a344 get</span><br></pre></td></tr></table></figure>
<p><img src="/2020/11/11/fb/12.png" alt="12"></p>
<p><em>#</em> <em>退出控制台</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[group:1]&gt; quit</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FISCO-BCOS/" rel="tag">FISCO BCOS</a></li></ul>

    </footer>
  </div>

    
 
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2018-2020
        <i class="ri-heart-fill heart_icon"></i> Syraer
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
        <li>
          <a href="http://www.beian.gov.cn/portal/index" target="_black" rel="nofollow">皖ICP备18009389号-1</a>
        </li>
        
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1279416140&amp;web_id=1279416140'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Syraer&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>